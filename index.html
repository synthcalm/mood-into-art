<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Keep existing head content -->
  <style>
    /* Add/modify these styles */
    .footer-bar {
      font-size: 0.9em; /* Smaller font */
    }
    
    #countdownDisplay {
      color: #FFFF00; /* Yellow for better visibility */
    }

    /* Date/time inline styling */
    #dateTimeDisplay {
      display: flex;
      gap: 10px;
    }

    /* Image generation fix */
    #generatedImage {
      display: block !important; /* Force display when src exists */
      max-width: 90%;
      margin: 15px auto;
    }
  </style>
</head>
<body>
  <!-- Modify footer bar -->
  <div class="footer-bar">
    <div id="dateTimeDisplay">
      <span id="currentDate"></span>
      <span id="currentTime"></span>
    </div>
    <div id="countdownDisplay">00:30:00</div>
  </div>

<script>
    // ========== COUNTDOWN TIMER FIX (30 minutes) ==========
    const MAX_RECORD_TIME = 30 * 60; // 30 minutes in seconds

    function startCountdown() {
      let seconds = MAX_RECORD_TIME;
      countdownInterval = setInterval(() => {
        const hours = Math.floor(seconds / 3600);
        const minutes = Math.floor((seconds % 3600) / 60);
        const secs = seconds % 60;
        
        document.getElementById('countdownDisplay').textContent = 
          `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
          
        if (seconds-- <= 0) clearInterval(countdownInterval);
      }, 1000);
    }

    // ========== DATE/TIME FORMAT FIX ==========
    function updateDateTime() {
      const now = new Date();
      document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'short',
        day: 'numeric'
      });
      document.getElementById('currentTime').textContent = now.toLocaleTimeString('en-US', {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });
    }

    // ========== IMAGE GENERATION FIX ==========
    generateButton.addEventListener('click', async () => {
      if (!activityInput.value.trim() || styleSelect.value === 'none') {
        alert('Please describe your mood and select a style!');
        return;
      }

      const loading = document.getElementById('loadingIndicator');
      const generatedImage = document.getElementById('generatedImage');
      
      try {
        loading.style.display = 'flex';
        generatedImage.style.display = 'none';

        // Simulated API call with 1.5s delay
        await new Promise(resolve => setTimeout(resolve, 1500));
        
        // Use actual working image URL
        generatedImage.src = `https://source.unsplash.com/random/800x600/?${encodeURIComponent(styleSelect.value)}`;
        generatedImage.onload = () => {
          generatedImage.style.display = 'block';
          document.getElementById('beepSound').play();
          addHistoryEntry(activityInput.value);
        };
        
      } catch (error) {
        console.error('Generation error:', error);
        alert('Image generation failed: ' + error.message);
      } finally {
        loading.style.display = 'none';
      }
    });

    // Initialize with current time
    updateDateTime();
    setInterval(updateDateTime, 1000);
</script>
</body>
</html>
